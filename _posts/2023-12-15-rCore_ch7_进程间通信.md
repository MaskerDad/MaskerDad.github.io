---
title: rCore_ch7_进程间通信

date: 2023-12-15 17:00:00 +0800

categories: [读书笔记, rCore指导文档]

tags: [rCore]

description: 
---

# 1 概述

为了让简单的应用程序能够组合在一起形成各种强大和复杂的功能，本章要完成的操作系统的核心目标是： **让不同应用通过进程间通信的方式组合在一起运行** 。

IPCOS 的总体结构如下图所示：

![迅猛龙操作系统 - IPC OS总体结构](https://rcore-os.cn/rCore-Tutorial-Book-v3/_images/ipc-os-detail-2.png)

IPCOS 增加了两种通信机制：

* 交换数据的管道（Pipe）机制

  这里把管道看成是一种特殊的内存文件，并在进程的打开文件表 fd_talbe 中被管理，而且进程通过文件读写系统调用就可以很方便地基于管道实现进程间的数据交换。

* 发送异步通知事件的信号（signal）机制

  信号是进程管理的一种资源，发送信号的进程可以通过系统调用给接收信号的目标进程控制块中的 signal 结构更新所发信号信息，操作系统再通过扩展 trap_handler 中从内核态返回到用户态的处理流程， 改变了接收信号的目标进程的执行上下文，从而让接收信号的目标进程可以优先执行处理信号事件的预设函数 signal_handler ，在处理完信号后，再继续执行之前暂停的工作。

应用程序通过新增的管道和信号相关的系统调用可以完成进程间通信。这两种机制所对应的资源都被进程管理，如下图所示：

![进程管理的管道与信号](https://rcore-os.cn/rCore-Tutorial-Book-v3/_images/tcb-ipc-standard-file.png)

实现迅猛龙操作系统的过程就是对各种内核数据结构和相关操作的进一步扩展的过程。这里主要涉及到：

- **支持标准输入/输出文件**
- **支持管道文件**
- **支持对应用程序的命令行参数的解析和传递**
- **实现标准 I/O 重定向功能**
- **支持信号**

# 2 内容梳理

## 2.1 基于文件的标准输入/输出



## 2.2 基于文件的管道机制



## 2.3 支持命令行参数



## 2.4 标准I/O重定向



## 2.5 信号机制



# 3 疑难解决

# 4 //TODO: 实验
